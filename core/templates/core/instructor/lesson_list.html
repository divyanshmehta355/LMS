{% extends 'base.html' %}
{% block content %}
<h1 class="text-2xl font-bold mb-4">Lessons for "{{ course.title }}"</h1>
<a href="{% url 'create_lesson' course.id %}" class="bg-blue-500 text-white px-4 py-2 rounded">+ New Lesson</a>
<ul class="mt-6 space-y-4">
    {% for lesson in lessons %}
    <li class="bg-white p-4 rounded shadow">
        <h2 class="text-lg font-semibold">{{ lesson.title }}</h2>
        {% if lesson.file_id %}
        <iframe src="https://cloud.appwrite.io/v1/storage/buckets/684345b50008bfe7742b/files/{{ lesson.file_id }}/view?project=6843452b00353fbabc66" frameborder="0"></iframe>
        <!-- <a href="https://cloud.appwrite.io/v1/storage/buckets/684345b50008bfe7742b/files/{{ lesson.file_id }}/view?project=6843452b00353fbabc66" target="_blank" class="text-blue-600 underline">Download File</a> -->
        {% endif %}
        <p class="text-gray-600">{{ lesson.content|truncatewords:20 }}</p>
        <div class="mt-2 space-x-3">
            <a href="{% url 'update_lesson' lesson.id %}" class="text-blue-600">Edit</a>
            <a href="{% url 'delete_lesson' lesson.id %}" class="text-red-600">Delete</a>
        </div>
    </li>
    {% empty %}
    <p>No lessons yet.</p>
    {% endfor %}
</ul>
{% endblock %}
